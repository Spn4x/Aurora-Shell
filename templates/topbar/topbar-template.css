/* --- Wallust Placeholders for Topbar --- */
@define-color custom-primary {{foreground}};      /* Main text */
@define-color custom-secondary {{color7}};         /* Sub-text (often lighter grey) */
@define-color custom-background {{background}};    /* Main bar background */
@define-color custom-surface {{color0}};         /* Module background */
@define-color custom-accent {{color4}};        /* Primary accent */
@define-color gnome-bg #28282C;
@define-color gnome-highlight #3E3E41;




@define-color theme_unfocused_color @gnome-highlight;
@define-color theme_selected_bg_color @custom-accent;
@define-color theme_fg_color @custom-primary;
@define-color theme_bg_color @custom-background;

/* --- Main Bar Container --- */
.aurora-topbar-widget {
    font-family: "JetBrainsMono Nerd Font", "Noto Sans Nerd Font", sans-serif;
    font-size: 10.5pt;
    font-weight: normal;
    color: @custom-primary;
    border-radius: 0px;
    box-shadow: none;
    text-shadow: none;
     background-color: @gnome-bg;
    border: 2px solid alpha(@accent, 0.2);
    padding: 2px 5px;
    border-radius: 12px;
    
}

/* --- Group Spacing --- */
.aurora-topbar-widget .group-start {
    margin-left: 5px;
}

.aurora-topbar-widget .workspace-module {
    margin: 0 8px;
     min-width: 50px;
    
  
}

/* --- Clock Module Progress Bars --- */
/* This targets the progress bars INSIDE the clock module specifically */
.aurora-topbar-widget .clock-module progress,
.aurora-topbar-widget .clock-module progressbar,
.aurora-topbar-widget .clock-module trough {
    /* Reset all default GTK styling to prevent thin lines */
    min-height: 0;
    min-width: 0;
    border: none;
    border-radius: 0;
    box-shadow: none;
    padding: 0;
    background-image: none; /* Crucial for overriding default themes */
}




.aurora-topbar-widget .audio-module .album-art-bg {
    border-radius: 8px;
    filter: blur(1px);
    opacity: 0.6;

}

/* This rule for the text label remains the same and is correct. */
.aurora-topbar-widget .audio-module .song-title-overlay {
    font-weight: bold;
    font-size: 9pt;
    color: white;
    background: none; /* Make sure the label itself is transparent */
    padding: 0 8px;
}



/* --- Zen Module --- */
.aurora-topbar-widget .zen-module {
    padding: 0;
    margin-right: 3px;
    background: none; /* Let Cairo draw the background */
    border: none;
    box-shadow: none;
}




/* --- Sysinfo Module Styling --- */

/* 1. Reset Container Logic */
/* We remove padding and borders because the C drawing area needs to fill the space */
.aurora-topbar-widget .sysinfo-module {
    padding: 0;
    margin: 0;
    background: none; /* Crucial: Let the Cairo draw function handle the background */
    border: none;
    box-shadow: none;
    min-width: 220px; /* Match the C code size request */
}

/* 2. Text Overlay Styling */
/* This sits on top of your generated gauge bars */
.aurora-topbar-widget .sysinfo-module .sys-text-overlay {
    font-family: "JetBrainsMono Nerd Font", monospace;
    font-size: 9pt;
    font-weight: 800; /* Extra bold to pop against colors */
    color: @theme_fg_color;
    
    /* 
       A slight shadow helps readability if the accent color 
       is very light and the text is white 
    */
    text-shadow: 0 1px 2px rgba(0,0,0,0.5); 
    
    /* Ensure it doesn't block the visual of the bars too much */
    opacity: 0.95; 
    margin: 0 1px;
}

/* 3. Ensure Overlay Container doesn't add weird spacing */
.aurora-topbar-widget .sysinfo-module overlay {
    padding: 0;
}





/* 
 * The trough is the empty part of the progress bar.
 * We want it to be the main background color of our module.
 */
.aurora-topbar-widget .clock-module trough {
    background-color: @gnome-highlight;
}

/* Force the color of the FILLED part of the bars */
.aurora-topbar-widget .clock-module .month-progress progressbar {
    background-color: @custom-accent;
}

.aurora-topbar-widget .clock-module .day-progress progressbar {
    background-color: alpha(@custom-accent, 0.6);
}

/* Ensure widgets inside the overlay have no background of their own */
.aurora-topbar-widget .clock-module overlay,
.aurora-topbar-widget .clock-module box,
.aurora-topbar-widget .clock-module label {
    background: none;
}


/* --- Clock & Generic "Pill" Modules --- */
.aurora-topbar-widget .clock-module,
.aurora-topbar-widget .audio-module {
    padding: 3px 7px;
    margin: 0px;
    border-radius: 8px;
    background: @gnome-highlight;
    font-weight: normal;
    min-width: 40px;
    font-weight: bold;
}

.aurora-topbar-widget .clock-module {
    margin-right: 8px;
    padding: 0;
    min-width: 50px;
}

.aurora-topbar-widget .popover-module {
    font-size: 15pt;
    padding-right: 12px;
    padding-left: 8px;
    padding-bottom: 2px;
    margin-right: 5px;
    background: @gnome-highlight;
    border-radius: 8px;
}







.aurora-topbar-widget .clock-module:active,

.aurora-topbar-widget .audio-module:active {
    background-color: @accent;
}

/* --- Sysinfo Module Internals --- */
.aurora-topbar-widget .sysinfo-module .content-box,
.aurora-topbar-widget .sysinfo-module .glyph-label,
.aurora-topbar-widget .sysinfo-module label {
    background: none;
}
.aurora-topbar-widget .sysinfo-module .glyph-label { 
    font-size: 1.1em; 
    margin-right: 0; 
    opacity: 0.8; 
}

.aurora-topbar-widget .sysinfo-module label { 
    margin-right: 5px; 
}

/* --- Audio Module Internals --- */
.aurora-topbar-widget .audio-module.glyph-label {
    font-size: 1.1em;
    opacity: 0.8;
    padding: 0;
}

.aurora-topbar-widget .audio-module {
    padding: 0;
}
/* ======================================================================= */

/* --- Part 1: Style for ALL Popover Containers --- */

popover {
    background-color: @gnome-bg;
    border: none;
    box-shadow: none;
    padding: 0;
}

popover > contents {
    background-color: @gnome-bg;
    border: 2px solid alpha(@custom-accent, 0.2);
    border-radius: 12px;
    padding: 8px;
    min-width: 250px;
}

popover arrow {
    min-width: 24px;
    min-height: 12px;
    border-color: transparent;
    background: none;
}

popover.top arrow {
    border-bottom: 12px solid alpha(@custom-accent, 0.7);
}

popover.bottom arrow {
    border-top: 12px solid alpha(@custom-accent, 0.7);
}


/* --- Part 2: Style for ALL Buttons Inside Popovers --- */
/* This targets the original audio buttons AND your generic .flat buttons */

.sink-list-popover .sink-button,
popover .flat {
    background-color: transparent;
    color: @custom-primary;
    border: none;
    box-shadow: none;
    border-radius: 6px;
    padding: 8px 12px;
    font-weight: bold;
}

.sink-list-popover .sink-button:hover,
popover .flat:hover {
    background-color: alpha(@custom-accent, 0.5);
}

/* This handles the active state for the audio module */
.sink-list-popover .sink-button.active-sink {
    background-color: @custom-accent;
    color: @custom-background;
}

/* These are helper styles, leave them as they are */
.sink-list-popover .glyph-label {
    font-size: 1.1em;
    margin-right: 8px;
    opacity: 0.8;
}

.sink-list-popover .sink-button box,
.sink-list-popover .sink-button label {
    background: none;
}
/* --- Zen (DND) Module --- */
.aurora-topbar-widget .zen-module .zen-active {
    background-color: @custom-accent;
    color: @custom-background;
}

.aurora-topbar-widget .zen-module .glyph-label {
    font-size: 1.1em;
}